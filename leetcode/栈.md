### æ ˆçš„åŸºç¡€

â€‹	[232. ç”¨æ ˆå®ç°é˜Ÿåˆ—](#232-ç”¨æ ˆå®ç°é˜Ÿåˆ—)

â€‹	[155. æœ€å°æ ˆ](#155-æœ€å°æ ˆ)



### åŠ å‡ä¹˜é™¤æ‹¬å·è®¡ç®—

â€‹	**[20. æœ‰æ•ˆçš„æ‹¬å·](#20-æœ‰æ•ˆçš„æ‹¬å·)**

â€‹	[32. æœ€é•¿æœ‰æ•ˆæ‹¬å·](#32-æœ€é•¿æœ‰æ•ˆæ‹¬å·)

â€‹	**[394. å­—ç¬¦ä¸²è§£ç ](#394-å­—ç¬¦ä¸²è§£ç )**

â€‹	[71. ç®€åŒ–è·¯å¾„](#71-ç®€åŒ–è·¯å¾„)



### å•è°ƒæ ˆ

#### é€’å‡æ ˆ

â€‹	[739. æ¯æ—¥æ¸©åº¦](#739-æ¯æ—¥æ¸©åº¦)

â€‹	**[42. æ¥é›¨æ°´](#42-æ¥é›¨æ°´)**âš¡

#### é€’å¢æ ˆ

â€‹	**[84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](#84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢)**

â€‹	[402. ç§»æ‰Kä½æ•°å­—](#402-ç§»æ‰Kä½æ•°å­—)

â€‹		[321. æ‹¼æ¥æœ€å¤§æ•°](#321-æ‹¼æ¥æœ€å¤§æ•°)

â€‹	[316. å»é™¤é‡å¤å­—æ¯](#316-å»é™¤é‡å¤å­—æ¯)



## æ ˆçš„åŸºç¡€

æ ¹æ®æ ˆå’Œé˜Ÿåˆ—çš„è§„åˆ™ï¼šæ ˆçš„é¡ºåºä¸ºåè¿›å…ˆå‡ºï¼Œè€Œé˜Ÿåˆ—çš„é¡ºåºä¸ºå…ˆè¿›å…ˆå‡ºã€‚ä¸¾ä¾‹å­ç„¶åç”»ä¸ªå›¾å°±è§£å‡ºæ¥äº†



### [232. ç”¨æ ˆå®ç°é˜Ÿåˆ—](https://leetcode-cn.com/problems/implement-queue-using-stacks/)

**ç›¸åŒé¢˜ï¼š[å‰‘æŒ‡ Offer 09. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—](https://leetcode-cn.com/problems/yong-liang-ge-zhan-shi-xian-dui-lie-lcof/)**

Difficulty: **ç®€å•**


è¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆ`push`ã€`pop`ã€`peek`ã€`empty`ï¼‰ï¼š

å®ç° `MyQueue` ç±»ï¼š

*   `void push(int x)` å°†å…ƒç´  x æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾
*   `int pop()` ä»é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å¹¶è¿”å›å…ƒç´ 
*   `int peek()` è¿”å›é˜Ÿåˆ—å¼€å¤´çš„å…ƒç´ 
*   `boolean empty()` å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false`

**è¯´æ˜ï¼š**

*   ä½ åªèƒ½ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯åªæœ‰ `push to top`, `peek/pop from top`, `size`, å’Œ `is empty` æ“ä½œæ˜¯åˆæ³•çš„ã€‚
*   ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚

**è¿›é˜¶ï¼š**

*   ä½ èƒ½å¦å®ç°æ¯ä¸ªæ“ä½œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º `O(1)` çš„é˜Ÿåˆ—ï¼Ÿæ¢å¥è¯è¯´ï¼Œæ‰§è¡Œ `n` ä¸ªæ“ä½œçš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªæ“ä½œå¯èƒ½èŠ±è´¹è¾ƒé•¿æ—¶é—´ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š
["MyQueue", "push", "push", "peek", "pop", "empty"]
[[], [1], [2], [], [], []]
è¾“å‡ºï¼š
[null, null, null, 1, 1, false]

è§£é‡Šï¼š
MyQueue myQueue = new MyQueue();
myQueue.push(1); // queue is: [1]
myQueue.push(2); // queue is: [1, 2] (leftmost is front of the queue)
myQueue.peek(); // return 1
myQueue.pop(); // return 1, queue is [2]
myQueue.empty(); // return false
```

**æç¤ºï¼š**

*   `1 <= x <= 9`
*   æœ€å¤šè°ƒç”¨ `100` æ¬¡ `push`ã€`pop`ã€`peek` å’Œ `empty`
*   å‡è®¾æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç©ºçš„é˜Ÿåˆ—ä¸ä¼šè°ƒç”¨ `pop` æˆ–è€… `peek` æ“ä½œï¼‰

**æ€è·¯ï¼šç”»ä¸€ä¸‹å›¾å°±å‡ºæ¥äº†ã€‚**

æ¯”è¾ƒç›´æ¥çš„æƒ³æ³•æ˜¯æŠŠstackæƒ³è±¡æˆä¸€å é¥¼å¹²ï¼Œå·²ç»æŒ‰ç…§é˜Ÿåˆ—çš„é¡ºåºæ’å¥½äº†ã€‚è¾“å…¥1ï¼Œ2ï¼Œ3ï¼Œä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ˜¯1ï¼Œ2ï¼Œ3ã€‚1å…ˆå‡ºæ ˆï¼Œç„¶å2ï¼Œ3ã€‚å¦‚æœæ­¤æ—¶å¾€è¿›æ’å…¥ä¸€ä¸ª4ï¼Œéœ€è¦æŠŠ4æ”¾åˆ°æœ€åº•ä¸‹ï¼Œä¸€ä¸ªå¯è¡Œè§£æ˜¯æŠŠé¥¼å¹²ä¾æ¬¡æ”¾åˆ°é›¶ä¸€å ï¼Œé›¶ä¸€å ä»ä¸Šåˆ°ä¸‹å˜æˆäº†3ï¼Œ2ï¼Œ1çš„é¡ºåºã€‚ç„¶åæŠŠ4æ”¾åˆ°åŸæ¥çš„åœ°æ–¹ï¼Œå†æŠŠ3ï¼Œ2ï¼Œ1æ”¾å›å»ã€‚æ­¤æ—¶åˆå˜æˆäº†1ï¼Œ2ï¼Œ3ï¼Œ4çš„é¡ºåºã€‚å–çš„æ—¶å€™ç›´æ¥å–å°±æ˜¯é˜Ÿåˆ—çš„é¡ºåºã€‚

**æ›´å¥½çš„ï¼šä¸¤ä¸ªStackï¼Œä¸€ä¸ªä¸“é—¨ç”¨äºpushï¼Œä¸€ä¸ªç”¨äºpopï¼ˆä¸€ä¸ªç”¨äºè¯»ï¼Œä¸€ä¸ªç”¨äºå†™ï¼Œäº’ä¸å½±å“ï¼‰ã€‚è´Ÿè´Ÿå¾—æ­£** 
Push - O(1) per operation, Pop - Amortized O(1) per operation.  

```java
public class MyQueue {
    private Stack<Integer> in = new Stack<>();
    private Stack<Integer> out = new Stack<>();

    public void push(int x) {
        in.push(x);
    }

    public int pop() {
        update();
        return out.pop();
    }

    public int peek() {
        update();
        return out.peek();
    }

    private void update() {
        if (out.isEmpty()) {
            while (!in.isEmpty()) {
                out.push(in.pop());
            }
        }
    }

    public boolean empty() {
        return in.isEmpty() && out.isEmpty();
    }
}
```

==**å®é™…æ„ä¹‰ï¼šå¤šè¿›ç¨‹ï¼Œè¯»å†™åˆ†ç¦»**==  [leetcode@heqingy](https://leetcode.com/problems/implement-queue-using-stacks/discuss/64284/Do-you-know-when-we-should-use-two-stacks-to-implement-a-queue)
The application for this implementation is to separate read & write of a queue in **multi-processing**. **One of the stack is for read, and another is for write.** They only interfere each other when the former one is full or latter is empty.
This is not only a trick. :)   

When there's only one thread doing the read/write operation to the stack, there will always one stack empty. However, in a multi-thread application, if we have only one queue, for thread-safety, either read or write will lock the whole queue. In the two stack implementation, as long as the second stack is not empty, push operation will not lock the stack for pop.

### [155. æœ€å°æ ˆ](https://leetcode-cn.com/problems/min-stack/)

Difficulty: **ç®€å•**


è®¾è®¡ä¸€ä¸ªæ”¯æŒ `push` ï¼Œ`pop` ï¼Œ`top` æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚

*   `push(x)` â€”â€” å°†å…ƒç´  x æ¨å…¥æ ˆä¸­ã€‚
*   `pop()` â€”â€” åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚
*   `top()` â€”â€” è·å–æ ˆé¡¶å…ƒç´ ã€‚
*   `getMin()` â€”â€” æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚

**ç¤ºä¾‹:**

```
è¾“å…¥ï¼š
["MinStack","push","push","push","getMin","pop","top","getMin"]
[[],[-2],[0],[-3],[],[],[],[]]

è¾“å‡ºï¼š
[null,null,null,null,-3,null,0,-2]

è§£é‡Šï¼š
MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin();   --> è¿”å› -3.
minStack.pop();
minStack.top();      --> è¿”å› 0.
minStack.getMin();   --> è¿”å› -2.
```

**æç¤ºï¼š**

*   `pop`ã€`top` å’Œ `getMin` æ“ä½œæ€»æ˜¯åœ¨ **éç©ºæ ˆ** ä¸Šè°ƒç”¨ã€‚

**æ–¹æ³•ä¸€ï¼š**ç”¨ä¸€ä¸ªé¢å¤–çš„minStackç”¨æ¥å­˜æœ€å°å…ƒç´ ï¼Œå¦‚æœæ–°æ¥çš„å…ƒç´ <=minStackæ ˆé¡¶ï¼ŒæŠŠæ–°æ¥çš„å…ƒç´ åŠ åˆ°æ ˆé¡¶ã€‚
ä¹Ÿæœ‰äººåªç”¨ä¸€ä¸ªstackï¼Œé‡åˆ°å°çš„ï¼Œè¿å­˜ä¸¤ä¸ªè¿›å»ï¼ŒåŒæ—¶ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡è®°å½•minã€‚æ—¶é—´ã€ç©ºé—´å¤æ‚åº¦å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œæ„Ÿè§‰æ„ä¹‰ä¸å¤§ï¼Œå¯è¯»æ€§è¿˜ä¸æ˜¯å¾ˆå¼ºã€‚

```java
class MinStack {
    // stack: store the stack numbers
    private Stack<Integer> stack = new Stack<Integer>();
    // minStack: store the current min values
    private Stack<Integer> minStack = new Stack<Integer>();

    public void push(int x) {
        // store current min value into minStack
        if (minStack.isEmpty() || x <= minStack.peek()) {
            minStack.push(x);
        }
        stack.push(x);
    }

    public void pop() {
        // use equals to compare the value of two object, if equal, pop both of them
        if (stack.peek().equals(minStack.peek())) {
            minStack.pop();
        }
        stack.pop();
    }

    public int top() {
        return stack.peek();
    }

    public int getMin() {
        return minStack.peek();
    }
}
```

**æ–¹æ³•2ï¼šè‡ªå®šä¹‰é“¾è¡¨ç»“æ„ï¼Œç±»ä¼¼äºLinkedListã€‚LinkedListä½œä¸ºDequeçš„å®ç°ç±»ï¼Œå¯ä»¥å½“ä½œæ ˆä½¿ç”¨ã€‚**

Nodeï¼Œæˆå‘˜å˜é‡minå­˜å‚¨stackç›®å‰çš„æœ€å°å€¼ã€‚æ¯æ¬¡å…¥æ ˆï¼Œæ¯”è¾ƒvalå’Œheadçš„minã€‚

```java
class MinStack {
    private class Node {
        int val;
        int min;
        Node next;

        private Node(int val, int min) {
            this(val, min, null);
        }

        private Node(int val, int min, Node next) {
            this.val = val;
            this.min = min;
            this.next = next;
        }
    }

    private Node head;

    public void push(int x) {
        if (head == null) {
            head = new Node(x, x);
        } else {
            head = new Node(x, Math.min(x, head.min), head);
        }
        //å®ƒçš„valä¸å˜ï¼ŒåŒæ—¶è®°å½•stackå·²å­˜åœ¨å…ƒç´ +è‡ªå·±ï¼Œä¹Ÿå°±æ˜¯stackä¸­æœ€å°çš„valã€‚
        //åˆ é™¤çš„æ—¶å€™ï¼Œä¸‹ä¸€ä¸ªå…ƒç´ çš„minè¿˜æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ çš„valå’Œstackä¸‹é¢å…¶ä»–å…ƒç´ çš„valçš„æœ€å°å€¼ã€‚
    }

    public void pop() {
        head = head.next;
    }

    public int top() {
        return head.val;
    }

    public int getMin() {
        return head.min;
    }
}
```



## æ ˆçš„åº”ç”¨â€”â€”åŠ å‡ä¹˜é™¤æ‹¬å·è®¡ç®—

è®¡ç®—æœºä¸­çš„åŠ å‡ä¹˜é™¤è¿ç®—å°±æ˜¯ç”¨æ ˆå®ç°çš„ï¼Œå¸¦æ‹¬å·çš„è¿ç®—ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åŸå› æ˜¯è¿ç®—å¹¶ä¸æ˜¯ç›´æ¥é¡ºåºè¿ç®—ï¼Œä¹˜é™¤å’Œæ‹¬å·ä¼šå½±å“è¿ç®—é¡ºåºã€‚ä¾‹å¦‚è¡¨è¾¾å¼ `a + b * c + d`ï¼Œè¦å…ˆè®¡ç®—`e = b * c`ï¼Œç„¶åå†æŠŠå®ƒçš„ç»“æœeå‚ä¸åˆ°åé¢çš„è¿ç®—ä¸­ï¼š`a + e + d`ã€‚

å®ç°ä¸Šï¼šéœ€è¦é¡ºåºéå†è¡¨è¾¾å¼ä¸­çš„æ“ä½œæ•°ï¼Œå¹¶ä¸”å…ˆç”¨ä¸€ä¸ªå®¹å™¨å­˜èµ·æ¥è¿™äº›æ“ä½œæ•°ï¼Œç­‰é‡åˆ°é«˜ä¼˜å…ˆçº§çš„è¿ç®—ç¬¦ï¼Œå…ˆè®¡ç®—é«˜ä¼˜å…ˆçº§çš„ã€‚ä¹Ÿå°±æ˜¯è¯´åè¿›å…¥å®¹å™¨çš„éƒ¨åˆ†æ“ä½œæ•°åè€Œä¼šå…ˆè¿›è¡Œè¿ç®—ï¼Œ**å®¹å™¨éœ€è¦æ»¡è¶³åå…¥å…ˆå‡ºçš„æ€§è´¨â€”â€”å³æ ˆã€‚**

å¦å¤–ï¼Œé€’å½’çš„æœ¬è´¨å°±æ˜¯æ ˆï¼Œå¯ä»¥ç±»æ¯”é€’å½’æ¥æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚ååºéå†çš„é€’å½’ä¹Ÿå¯ä»¥åšåˆ°å…ˆä¸è®¡ç®—è¿™ä¸€å±‚çš„ç»“æœï¼Œæ·±å…¥é€’å½’ï¼Œè®¡ç®—ä¸­é—´çš„ç»“æœï¼ŒæŠŠä¸­é—´çš„ç»“æœè¿”å›åï¼Œå†åˆ©ç”¨åˆ°è¿”å›å€¼è®¡ç®—è¿™ä¸€å±‚çš„ç»“æœã€‚



### [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/valid-parentheses/)

Difficulty: **ç®€å•**


ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ `'('`ï¼Œ`')'`ï¼Œ`'{'`ï¼Œ`'}'`ï¼Œ`'['`ï¼Œ`']'` çš„å­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚

æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š

1.  å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚
2.  å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "()"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "()[]{}"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "(]"
è¾“å‡ºï¼šfalse
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šs = "([)]"
è¾“å‡ºï¼šfalse
```

**ç¤ºä¾‹ 5ï¼š**

```
è¾“å…¥ï¼šs = "{[]}"
è¾“å‡ºï¼štrue
```

**æç¤ºï¼š**

*   `1 <= s.length <= 10<sup>4</sup>`
*   `s` ä»…ç”±æ‹¬å· `'()[]{}'` ç»„æˆ

**æ€è·¯ï¼šæ‹¬å·ç›¸å…³çš„æ˜¯å…¸å‹çš„æ ˆçš„åº”ç”¨â€”â€”åè¿›å…¥å®¹å™¨çš„å¯èƒ½å…ˆå‚ä¸è¿ç®—--åå…¥å…ˆå‡ºã€‚**

```java
	public boolean isValid(String s) {
        Stack<Character> stack = new Stack<>();
        for (char c : s.toCharArray()) {
            if (c == '(') {
                stack.push(')');
            } else if (c == '[') {
                stack.push(']');
            } else if (c == '{') {
                stack.push('}');
            } else if (stack.isEmpty() || stack.pop() != c) {
                return false;
            }
        }
        return stack.isEmpty();
    }
```



### [32. æœ€é•¿æœ‰æ•ˆæ‹¬å·](https://leetcode-cn.com/problems/longest-valid-parentheses/)

Difficulty: **å›°éš¾**


ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

*   0 <= s.length <= 3 * 10<sup>4</sup>
*   `s[i]` ä¸º `'('` æˆ– `')'`

**æ–¹æ³•1ï¼šæ ˆã€‚æ‹¬å·é¢˜ç¬¬ä¸€æ—¶é—´å°±åº”è¯¥æƒ³åˆ°æ ˆ**

```java
    public int longestValidParentheses(String s) {
        int res = 0;
        Stack<Integer> stack = new Stack<>();
        //æ ˆå†…å­˜çš„æ˜¯ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€ã€‚é¢„å…ˆæŠŠ-1å‹å…¥æ ˆï¼Œå¦‚æœs="()"ï¼Œ1-(-1)=2ã€‚
        stack.push(-1);
        for (int i = 0; i < s.length(); i++) {
            //é‡åˆ°'('ï¼Œ'('ä¸ä¼šæ˜¯æœ‰æ•ˆå¯¹çš„ç»“å°¾ï¼Œç›´æ¥å…¥æ ˆå½“å‰ä¸‹æ ‡
            if (s.charAt(i) == '(') {
                stack.push(i);
            } else {
                //é‡åˆ°')'ï¼Œå…ˆæŠŠæ ˆé¡¶å¼¹å‡ºæ¥ï¼Œ
                //å¦‚æœæ ˆå†…ç©ºäº†ï¼Œè¯´æ˜æ²¡æœ‰åŒ¹é…ã€‚æ›´æ–°ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€
                //å¦‚æœæ ˆå†…æ²¡æœ‰ç©ºï¼Œè¯´æ˜å½“å‰å’Œè¢«å¼¹å‡ºçš„æ ˆé¡¶é…å¯¹ï¼Œæ›´æ–°æœ€é•¿æœ‰æ•ˆæ‹¬å·ã€‚
                stack.pop();
                if (stack.empty()) {
                    stack.push(i);
                } else {
                    res = Math.max(res, i - stack.peek());
                }
            }
        }
        return res;
    }
```

**æ–¹æ³•2ï¼šåŠ¨æ€è§„åˆ’ã€‚**

```java
public int longestValidParentheses(String s) {
        int[] dp = new int[s.length()];
        int res = 0;
        for (int i = 0; i < s.length(); i++) {
            //å½“å‰æ˜¯')'æ‰ä¼šæœ‰åŒ¹é…
            if (i > 0 && s.charAt(i) == ')') {
                //å¦‚æœå‰ä¸€ä¸ªæ˜¯'('ï¼ŒåŒ¹é…æˆåŠŸï¼ŒåŠ ä¸Š'('å‰é¢çš„åŒ¹é…å¯¹ï¼Œä¹Ÿå°±æ˜¯dp[i - 2]
                if (s.charAt(i - 1) == '(') {
                    if (i - 2 >= 0) {
                        dp[i] = dp[i - 2] + 2;
                    } else {
                        dp[i] = 2;
                    }
                } //å¦‚æœå‰ä¸€ä¸ªæ˜¯')'ï¼Œåº”è¯¥æ ¹æ®å‰ä¸€ä¸ªçš„æœ€é•¿æœ‰å°æ‹¬å·ï¼Œå†å¾€å‰çœ‹1ä¸ªæ˜¯ä¸æ˜¯(ã€‚æ¯”å¦‚((()))
                else if (i - dp[i - 1] - 1 >= 0 && s.charAt(i - dp[i - 1] - 1) == '(') {
                    //å¦‚æœå¾€å‰èƒ½åŒ¹é…ä¸Šï¼Œå¹¶ä¸”å‰é¢è¿˜ä¸ä¸ºç©ºï¼ŒåŠ ä¸Šæ›´å‰é¢çš„åŒ¹é…å¯¹
                    if (i - dp[i - 1] - 2 >= 0) {
                        dp[i] = dp[i - 1] + 2 + dp[i - dp[i - 1] - 2];
                    } else {
                        dp[i] = dp[i - 1] + 2;
                    }
                }
            }
            res = Math.max(res, dp[i]);
        }
        return res;
    }
```



### [394. å­—ç¬¦ä¸²è§£ç ](https://leetcode-cn.com/problems/decode-string/)

Difficulty: **ä¸­ç­‰**


ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›å®ƒè§£ç åçš„å­—ç¬¦ä¸²ã€‚

ç¼–ç è§„åˆ™ä¸º: `k[encoded_string]`ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ _encoded_string_ æ­£å¥½é‡å¤ _k_ æ¬¡ã€‚æ³¨æ„ _k_ ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚

ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚

æ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° _k_ ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºç°åƒ `3a` æˆ– `2[4]` çš„è¾“å…¥ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "3[a]2[bc]"
è¾“å‡ºï¼š"aaabcbc"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "3[a2[c]]"
è¾“å‡ºï¼š"accaccacc"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = "2[abc]3[cd]ef"
è¾“å‡ºï¼š"abcabccdcdcdef"
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šs = "abc3[cd]xyz"
è¾“å‡ºï¼š"abccdcdcdxyz"
```

**æ€è·¯ï¼šè¿ç®—é—®é¢˜ç”¨Stackã€‚**æ•°å­—å­˜æ”¾åœ¨æ•°å­—æ ˆï¼Œå­—ç¬¦ä¸²å­˜æ”¾åœ¨å­—ç¬¦ä¸²æ ˆã€‚

ä¸¾ä¸€ä¸ªç‰¹åˆ«æƒ…å†µç‰¹åˆ«å…¨çš„ä¾‹å­ï¼Œæƒ³æ¸…æ¥šè¿™ä¸ªä¾‹å­å°±çŸ¥é“æ€ä¹ˆåšäº†ã€‚æ¯”å¦‚"3ab[cd20[ef]gh]em"

- é‡åˆ°æ•°å­—ï¼Œè¯´æ˜è¦å¾ªç¯ï¼Œç»Ÿè®¡æ•°å­—ï¼Œä¸€ç›´åˆ°é‡åˆ°[ã€‚æ¯”å¦‚20ï¼Œè¦ç»Ÿè®¡å…¨æ•°å­—ã€‚
- é‡åˆ°å­—ç¬¦ä¸²ï¼Œå…ˆç§¯ç´¯preï¼Œç­‰é‡åˆ°[çš„æ—¶å€™æŠŠç§¯ç´¯çš„preæ”¾åˆ°æ ˆé¡¶ï¼Œç»Ÿè®¡å®Œåé¢çš„å†åŠ ä¸Šæ ˆé¡¶çš„preã€‚
- é‡åˆ°[ï¼Œè¦æŠŠå‰é¢ç»Ÿè®¡çš„æ•°å­—æ”¾å…¥æ•°å­—æ ˆé¡¶ã€‚åŒæ—¶æŠŠå‰é¢ç§¯ç´¯çš„preæ”¾åˆ°æ ˆé¡¶ï¼Œæ–°å»ºä¸€ä¸ªpreï¼Œç­‰[]ç»“æ„éå†ç»“æŸä»¥åå†æŠŠæ ˆé¡¶çš„preåˆåˆ°ä¸€èµ·ã€‚
- é‡åˆ°]çš„æ—¶å€™å­—ç¬¦ä¸²æ ˆé¡¶+æ•°å­—æ ˆé¡¶*[]å†…çš„å­—ç¬¦ä¸²ã€‚

```java
public String decodeString(String s) {
    Stack<Integer> numStack = new Stack<>();
    Stack<String> stackPre = new Stack<>();
    StringBuilder pre = new StringBuilder();
    int times = 0;
    for (int i = 0; i < s.length(); i++) {
        if (s.charAt(i) >= '0' && s.charAt(i) <= '9') {
            times = times * 10 + (s.charAt(i) - '0');
        } else if (s.charAt(i) == '[') {
            stackPre.push(pre.toString());   //æŠŠä¸Šä¸€ä¸ª[å’Œå½“å‰[ä¹‹é—´çš„å…ˆå­˜åˆ°Stackä¸­ 
            pre = new StringBuilder();
            numStack.push(times);
            times = 0;
        } else if (s.charAt(i) == ']') {
            StringBuilder temp = new StringBuilder();
            for (int j = numStack.pop(); j > 0; j--) {
                temp.append(pre);
            }
            pre = new StringBuilder(stackPre.pop() + temp);
        } else {
            pre.append(s.charAt(i));
        }
    }
    return pre.toString();
}
```

å‚è€ƒå®˜æ–¹é¢˜è§£ï¼šç”¨é€’å½’æ›´ç®€å•ï¼Œç»´æŠ¤äº†ä¸€ä¸ªå…¨å±€æŒ‡é’ˆã€‚è¾¹ç•Œæƒ…å†µå®¹æ˜“é”™ã€‚

```java
class Solution {
    String src;
    int ptr;

    public String decodeString(String s) {
        src = s;
        ptr = 0;
        return getString();
    }

    public String getString() {
        if (ptr == src.length() || src.charAt(ptr) == ']') {
            // String -> EPS
            return "";
        }

        char cur = src.charAt(ptr);
        int repTime = 1;
        String ret = "";

        if (Character.isDigit(cur)) {
            // String -> Digits [ String ] String
            // è§£æ Digits
            repTime = getDigits();
            // è¿‡æ»¤å·¦æ‹¬å·
            ++ptr;
            // è§£æ String
            String str = getString();
            // è¿‡æ»¤å³æ‹¬å·
            ++ptr;
            // æ„é€ å­—ç¬¦ä¸²
            while (repTime-- > 0) {
                ret += str;
            }
        } else if (Character.isLetter(cur)) {
            // String -> Char String
            // è§£æ Char
            ret = String.valueOf(src.charAt(ptr++));
        }

        return ret + getString();
    }

    public int getDigits() {
        int ret = 0;
        while (ptr < src.length() && Character.isDigit(src.charAt(ptr))) {
            ret = ret * 10 + src.charAt(ptr++) - '0';
        }
        return ret;
    }
}
```



### [71. ç®€åŒ–è·¯å¾„](https://leetcode-cn.com/problems/simplify-path/)

Difficulty: **ä¸­ç­‰**


ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `path` ï¼Œè¡¨ç¤ºæŒ‡å‘æŸä¸€æ–‡ä»¶æˆ–ç›®å½•çš„ Unix é£æ ¼ **ç»å¯¹è·¯å¾„** ï¼ˆä»¥ `'/'` å¼€å¤´ï¼‰ï¼Œè¯·ä½ å°†å…¶è½¬åŒ–ä¸ºæ›´åŠ ç®€æ´çš„è§„èŒƒè·¯å¾„ã€‚

åœ¨ Unix é£æ ¼çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç‚¹ï¼ˆ`.`ï¼‰è¡¨ç¤ºå½“å‰ç›®å½•æœ¬èº«ï¼›æ­¤å¤–ï¼Œä¸¤ä¸ªç‚¹ ï¼ˆ`..`ï¼‰ è¡¨ç¤ºå°†ç›®å½•åˆ‡æ¢åˆ°ä¸Šä¸€çº§ï¼ˆæŒ‡å‘çˆ¶ç›®å½•ï¼‰ï¼›ä¸¤è€…éƒ½å¯ä»¥æ˜¯å¤æ‚ç›¸å¯¹è·¯å¾„çš„ç»„æˆéƒ¨åˆ†ã€‚ä»»æ„å¤šä¸ªè¿ç»­çš„æ–œæ ï¼ˆå³ï¼Œ`'//'`ï¼‰éƒ½è¢«è§†ä¸ºå•ä¸ªæ–œæ  `'/'` ã€‚ å¯¹äºæ­¤é—®é¢˜ï¼Œä»»ä½•å…¶ä»–æ ¼å¼çš„ç‚¹ï¼ˆä¾‹å¦‚ï¼Œ`'...'`ï¼‰å‡è¢«è§†ä¸ºæ–‡ä»¶/ç›®å½•åç§°ã€‚

è¯·æ³¨æ„ï¼Œè¿”å›çš„ **è§„èŒƒè·¯å¾„** å¿…é¡»éµå¾ªä¸‹è¿°æ ¼å¼ï¼š

*   å§‹ç»ˆä»¥æ–œæ  `'/'` å¼€å¤´ã€‚
*   ä¸¤ä¸ªç›®å½•åä¹‹é—´å¿…é¡»åªæœ‰ä¸€ä¸ªæ–œæ  `'/'` ã€‚
*   æœ€åä¸€ä¸ªç›®å½•åï¼ˆå¦‚æœå­˜åœ¨ï¼‰**ä¸èƒ½** ä»¥ `'/'` ç»“å°¾ã€‚
*   æ­¤å¤–ï¼Œè·¯å¾„ä»…åŒ…å«ä»æ ¹ç›®å½•åˆ°ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ä¸Šçš„ç›®å½•ï¼ˆå³ï¼Œä¸å« `'.'` æˆ– `'..'`ï¼‰ã€‚

è¿”å›ç®€åŒ–åå¾—åˆ°çš„ **è§„èŒƒè·¯å¾„** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼špath = "/home/"
è¾“å‡ºï¼š"/home"
è§£é‡Šï¼šæ³¨æ„ï¼Œæœ€åä¸€ä¸ªç›®å½•ååé¢æ²¡æœ‰æ–œæ ã€‚ 
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼špath = "/../"
è¾“å‡ºï¼š"/"
è§£é‡Šï¼šä»æ ¹ç›®å½•å‘ä¸Šä¸€çº§æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæ ¹ç›®å½•æ˜¯ä½ å¯ä»¥åˆ°è¾¾çš„æœ€é«˜çº§ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼špath = "/home//foo/"
è¾“å‡ºï¼š"/home/foo"
è§£é‡Šï¼šåœ¨è§„èŒƒè·¯å¾„ä¸­ï¼Œå¤šä¸ªè¿ç»­æ–œæ éœ€è¦ç”¨ä¸€ä¸ªæ–œæ æ›¿æ¢ã€‚
```

**ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼špath = "/a/./b/../../c/"
è¾“å‡ºï¼š"/c"
```

**æç¤ºï¼š**

*   `1 <= path.length <= 3000`
*   `path` ç”±è‹±æ–‡å­—æ¯ï¼Œæ•°å­—ï¼Œ`'.'`ï¼Œ`'/'` æˆ– `'_'` ç»„æˆã€‚
*   `path` æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ Unix é£æ ¼ç»å¯¹è·¯å¾„ã€‚

**æ€è·¯ï¼šæ ¹æ®åé¢çš„åˆ é™¤å‰é¢çš„ï¼Œæ˜¾ç„¶è¦ç”¨Stackã€‚**

```java
public String simplifyPath(String path) {
    Deque<String> stack = new ArrayDeque<>();
    for (String s : path.split("/")) {
        //ç©ºæ ˆçš„..ç›´æ¥ä¸¢æ‰
        if ("..".equals(s)) { 
            if (!stack.isEmpty()) {
                stack.pop();
            }
        } 
        //.ä¹Ÿç›´æ¥ä¸¢æ‰ã€‚
        //æ³¨æ„å¦‚æœæœ‰è¿ç»­//ï¼Œå¯èƒ½ä¼šå‡ºç°åˆ†å‰²ååˆ""ç©ºå­—ç¬¦ä¸²äº§ç”Ÿï¼Œä¹Ÿè¦æ’é™¤è¿™ç§æƒ…å†µ
        else if (!".".equals(s) && !"".equals(s)) {  
            stack.push(s);
        }
    }
    if (stack.isEmpty()) {
        return "/";
    }
    StringBuilder res = new StringBuilder();
    //stackä»æ ˆåº•å¼€å§‹éå†ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹æ³•ã€‚
    for (Iterator i = stack.descendingIterator();i.hasNext();) {
        res.append("/");
        res.append(i.next());
    }
    return res.toString();
}
```





## å•è°ƒæ ˆ

å¾ˆå¤šå•è°ƒæ ˆä¼šç”¨åˆ°sentinelï¼Œä¹Ÿå°±æ˜¯åœ¨éå†ä¹‹å‰å…ˆå¾€æ ˆä¸­pushä¸€ä¸ªå…ƒç´ ï¼Œä½œä¸ºè¾¹ç•Œå€¼ï¼Œæ’é™¤ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚æ¯”å¦‚[84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](#84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢)

**å•è°ƒé€’å‡æ ˆï¼š**

**==ç”¨äºO(1)å¿«é€Ÿè·å–å·¦å³ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„ã€‚==**å¯¹äºæ ˆä¸­å…ƒç´ ï¼Œæ ˆä¸­ä¸‹ä¸€ä¸ªå…ƒç´ å°±æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„ï¼Œç„¶ååœ¨éå†è¿‡ç¨‹ä¸­çœ‹æ˜¯ä¸æ˜¯æœ‰æ¯”å®ƒå¤§çš„å°±è¡Œäº†ï¼Œ**æ•´ä¸ªé—®é¢˜åªéœ€è¦ä¸€ééå†O(N)ã€‚**

ä¾‹å¦‚ï¼š**[42. æ¥é›¨æ°´](#42-æ¥é›¨æ°´)**

**å•è°ƒé€’å¢æ ˆï¼š**

**==ç”¨äºO(1)å¿«é€Ÿè·å–å·¦å³ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„ã€‚==**å¯¹äºæ ˆä¸­å…ƒç´ ï¼Œæ ˆä¸­ä¸‹ä¸€ä¸ªå…ƒç´ å°±æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„ï¼Œç„¶ååœ¨éå†è¿‡ç¨‹ä¸­çœ‹æ˜¯ä¸æ˜¯æœ‰æ¯”å®ƒå°çš„å°±è¡Œäº†ï¼Œ**æ•´ä¸ªé—®é¢˜åªéœ€è¦ä¸€ééå†O(N)ã€‚**

ä¾‹å¦‚ï¼š**[84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](#84-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢)**

**åœ¨åšé¢˜çš„è¿‡ç¨‹ä¸­å¤šä½“ä¼šï¼Œä¸€æƒ³åˆ°è¦æ‰¾åˆ°å·¦å³å¤§çš„æˆ–è€…å°çš„å°±ç”¨å•è°ƒæ ˆã€‚**



### [739. æ¯æ—¥æ¸©åº¦](https://leetcode-cn.com/problems/daily-temperatures/)

Difficulty: **ä¸­ç­‰**


è¯·æ ¹æ®æ¯æ—¥ `æ°”æ¸©` åˆ—è¡¨ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ã€‚å¯¹åº”ä½ç½®çš„è¾“å‡ºä¸ºï¼šè¦æƒ³è§‚æµ‹åˆ°æ›´é«˜çš„æ°”æ¸©ï¼Œè‡³å°‘éœ€è¦ç­‰å¾…çš„å¤©æ•°ã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ `0` æ¥ä»£æ›¿ã€‚

ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªåˆ—è¡¨ `temperatures = [73, 74, 75, 71, 69, 72, 76, 73]`ï¼Œä½ çš„è¾“å‡ºåº”è¯¥æ˜¯ `[1, 1, 4, 2, 1, 1, 0, 0]`ã€‚

**æç¤ºï¼š**`æ°”æ¸©` åˆ—è¡¨é•¿åº¦çš„èŒƒå›´æ˜¯ `[1, 30000]`ã€‚æ¯ä¸ªæ°”æ¸©çš„å€¼çš„å‡ä¸ºåæ°åº¦ï¼Œéƒ½æ˜¯åœ¨ `[30, 100]` èŒƒå›´å†…çš„æ•´æ•°ã€‚

**æ€è·¯ï¼šæ‰¾å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å½“å‰å¤§çš„ï¼Œç”¨å•è°ƒé€’å‡æ ˆã€‚éå¸¸ç®€å•**

```java
  	public int[] dailyTemperatures(int[] T) {
        Stack<Integer> stack = new Stack<>();
        int[] res = new int[T.length];
        for (int i = 0; i < T.length; i++) {
            while (!stack.isEmpty() && T[i] > T[stack.peek()]) {
                int idx = stack.pop();
                res[idx] = i - idx;
            }
            stack.push(i);
        }
        return res;
    }
```

ç±»ä¼¼é¢˜è¿˜æœ‰ï¼š

[496. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I](https://leetcode-cn.com/problems/next-greater-element-i/) æ¯”è¾ƒç®€å•ï¼Œç”¨ä¸€ä¸ªmapè®°å½•nums2çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚



### [42. æ¥é›¨æ°´](https://leetcode-cn.com/problems/trapping-rain-water/)

Difficulty: **å›°éš¾**


ç»™å®š _n_ ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](images/æ ˆ/rainwatertrap.png)

```
è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
è¾“å‡ºï¼š6
è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ 
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šheight = [4,2,0,3,2,5]
è¾“å‡ºï¼š9
```

**æç¤ºï¼š**

*   `n == height.length`
*   0 <= n <= 3 * 10<sup>4</sup>
*   0 <= height[i] <= 10<sup>5</sup>

è¿›é˜¶ï¼š[407. æ¥é›¨æ°´ II](https://leetcode-cn.com/problems/trapping-rain-water-ii/) é¢è¯•ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆéš¾

**æ–¹æ³•1ï¼šåŠ¨æ€è§„åˆ’ã€‚left[i]è¡¨ç¤ºiå·¦ä¾§çš„æœ€å¤§å€¼ï¼Œå³åŒºé—´[0,i)çš„æœ€å¤§å€¼ï¼Œright[i]è¡¨ç¤ºiå³ä¾§çš„æœ€å¤§å€¼ï¼Œå³åŒºé—´(i,len-1]çš„æœ€å¤§å€¼ã€‚å¦‚æœiä½ç½®æ¯”å·¦å³ä¸¤ä¾§çš„æœ€å¤§å€¼è¦å°ï¼Œè¯´æ˜iä½ç½®å¯ä»¥å­˜æ°´ã€‚æ°´é‡å–å†³äºçŸ­æ¿**

```java
	public int trap(int[] height) {
        int res = 0;
        int[] left = new int[height.length];
        int[] right = new int[height.length];

        for (int i = 1; i < height.length - 1; i++) {
            left[i] = Math.max(left[i - 1], height[i - 1]);
        }
        for (int i = height.length - 2; i >= 0; i--) {
            right[i] = Math.max(right[i + 1], height[i + 1]);
        }
        for (int i = 1; i < height.length - 1; i++) {
            int min = Math.min(left[i], right[i]);
            if (height[i] < min) {
                res = res + (min - height[i]);
            }
        }
        return res;
    }
```

**æ–¹æ³•2ï¼šå•è°ƒé€’å‡æ ˆã€‚**å¯¹äºå½“å‰ä½ç½®èƒ½ä¸èƒ½å­˜æ°´çš„å…³é”®æ˜¯å·¦å³æ˜¯ä¸æ˜¯æ¯”å®ƒå¤§ï¼Œ**å•è°ƒé€’å‡æ ˆï¼š**

==**ç”¨äºO(1)å¿«é€Ÿè·å–å·¦å³ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„ï¼Œè“„æ°´é‡å–å†³äºå·¦å³ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„ï¼Œåº”è¯¥ç«‹å³å°±èƒ½æƒ³åˆ°è¿™ç§æ–¹æ³•ã€‚**==å¯¹äºæ ˆä¸­å…ƒç´ ï¼Œæ ˆä¸­ä¸‹ä¸€ä¸ªå…ƒç´ å°±æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„ï¼Œç„¶ååœ¨éå†è¿‡ç¨‹ä¸­çœ‹æ˜¯ä¸æ˜¯æœ‰æ¯”å®ƒå¤§çš„å°±è¡Œäº†ï¼Œ**æ•´ä¸ªé—®é¢˜åªéœ€è¦ä¸€ééå†O(N)ã€‚**

æ¢ä¸€ç§ç†è§£æ–¹å¼ï¼šå¦‚æœæ˜¯å•è°ƒé€’å‡æ•°ç»„ï¼Œä¸èƒ½è“„æ°´ï¼Œå› æ­¤éœ€è¦æŠŠå•è°ƒé€’å‡çš„å…ˆå­˜èµ·æ¥ï¼Œé‡åˆ°åé¢å¤§çš„æ•°å†çœ‹èƒ½ä¸èƒ½åœ¨æ ˆé¡¶è¿™ä¸ªå°çš„æ•°çš„ä½ç½®ä¸Šè“„æ°´ã€‚

```java
public int trap(int[] height) {
    int res = 0;
    Stack<Integer> stack = new Stack<>();
    for (int i = 0; i < height.length; i++) {
        //å¦‚æœæ ˆä¸ç©ºå¹¶ä¸”å½“å‰æŒ‡å‘çš„é«˜åº¦å¤§äºæ ˆé¡¶é«˜åº¦å°±ä¸€ç›´å¾ªç¯
        while (!stack.empty() && height[i] > height[stack.peek()]) {
            //å–å‡ºè¦å‡ºæ ˆçš„å…ƒç´ 
            int h = height[stack.pop()];
            // æ ˆç©ºï¼ŒåŸæ ˆé¡¶å…ƒç´ å’Œå½“å‰å…ƒç´ ä¹‹é—´æ²¡æœ‰ç©ºéš™äº†ï¼Œä¸ä¼šå†æœ‰é›¨æ°´ã€‚
            if (!stack.empty()) {
                //ä¸¤å µå¢™ä¹‹å‰çš„è·ç¦»ã€‚
                int distance = i - stack.peek() - 1;
                int min = Math.min(height[stack.peek()], height[i]);
                res = res + distance * (min - h);
            }
        }
        //å½“å‰æŒ‡å‘çš„å¢™å…¥æ ˆ
        stack.push(i);
    }
    return res;
}
```

**æ–¹æ³•3ï¼šåŒæŒ‡é’ˆã€‚**å‡è®¾ä¸€å¼€å§‹`left-1`å¤§äº`right+1`ï¼Œåˆ™ä¹‹å`right`ä¸€ç›´å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°`right+1`å¤§äº`left-1`ã€‚åœ¨è¿™æ®µæ—¶é—´å†…`right`æ‰€éå†çš„æ‰€æœ‰ç‚¹éƒ½æ˜¯å·¦ä¾§æœ€é«˜ç‚¹`maxleft`å¤§äºå³ä¾§æœ€é«˜ç‚¹`maxright`çš„ï¼Œæ‰€ä»¥åªéœ€è¦åˆ¤æ–­`maxright`ä¸å½“å‰é«˜åº¦çš„å…³ç³»å°±èƒ½çŸ¥é“iå¤„èƒ½ä¸èƒ½è“„æ°´ã€‚åä¹‹`left`å³ç§»ï¼Œæ‰€ç»è¿‡çš„ç‚¹åªè¦åˆ¤æ–­`maxleft`ä¸å½“å‰é«˜åº¦çš„å…³ç³»å°±è¡Œã€‚

```java
	public int trap(int[] height) {
        int leftMax = 0, rightMax = 0;
        int left = 0, right = height.length - 1;
        int res = 0;
        while (left < right) {
            if (height[left] < height[right]) {
                if (height[left] < leftMax) {
                    //å½“å‰å€¼æ¯”leftMaxå°ï¼Œå¹¶ä¸”ä¸€å®šæ¯”rightMaxå°ï¼Œæ­¤å¤„å¯ä»¥è“„æ°´ã€‚
                    res += leftMax - height[left];
                } else {
                    //å½“å‰å€¼æ¯”leftMaxå¤§ï¼Œæ­¤å¤„ä¸èƒ½è“„æ°´ï¼Œæ›´æ–°leftMaxã€‚
                    leftMax = height[left];
                }
                left++;
            } else {
                if (height[right] < rightMax) {
                    res += rightMax - height[right];
                } else {
                    rightMax = height[right];
                }
                right--;
            }
        }
        return res;
    }
```

**ç›´æ¥ç”¨leftMaxå’ŒrightMaxæ¯”è¾ƒä¼šæ›´å®¹æ˜“ç†è§£ï¼š**

å¯¹äºä½ç½®`left`è€Œè¨€ï¼Œå®ƒå·¦è¾¹æœ€å¤§å€¼ä¸€å®šæ˜¯left_maxï¼Œå³è¾¹æœ€å¤§å€¼â€œå¤§äºç­‰äºâ€right_maxï¼Œè¿™æ—¶å€™ï¼Œå¦‚æœ`left_max<right_max`æˆç«‹ï¼Œé‚£ä¹ˆå®ƒå°±çŸ¥é“è‡ªå·±èƒ½å­˜å¤šå°‘æ°´äº†ã€‚æ— è®ºå³è¾¹å°†æ¥ä¼šä¸ä¼šå‡ºç°æ›´å¤§çš„right_maxï¼Œéƒ½ä¸å½±å“è¿™ä¸ªç»“æœã€‚ æ‰€ä»¥å½“`left_max<right_max`æ—¶ï¼Œæˆ‘ä»¬å°±å¸Œæœ›å»å¤„ç†leftä¸‹æ ‡ï¼Œåä¹‹ï¼Œæˆ‘ä»¬å¸Œæœ›å»å¤„ç†rightä¸‹æ ‡ã€‚

æ³¨æ„whileå¾ªç¯ç»“æŸæ¡ä»¶æ˜¯left<=rightã€‚

```java
	public int trap(int[] height) {
        int leftMax = 0, rightMax = 0;
        int left = 0, right = height.length - 1;
        int res = 0;
        while (left <= right) {
            if(leftMax < rightMax){
                res += Math.max(0, leftMax - height[left]);
                leftMax = Math.max(leftMax, height[left]);
                left++;
            }else{
                res += Math.max(0, rightMax - height[right]);
                rightMax = Math.max(rightMax, height[right]);
                right--;
            }
        }
        return res;
    }
```



æ–¹æ³•4ï¼šéŸ¦æ©å›¾ã€‚å¾ˆéš¾æƒ³å‡ºæ¥ã€‚[é¢˜è§£](https://leetcode-cn.com/problems/trapping-rain-water/solution/wei-en-tu-jie-fa-zui-jian-dan-yi-dong-10xing-jie-j/)

<img src="images/æ ˆ/53ab7a66023039ed4dce42b709b4997d2ba0089077912d39a0b31d3572a55d0b-trapping_rain_water.png" alt="trapping_rain_water.png" style="zoom:50%;" />

å›¾1ä»å·¦å¾€å³`S1+=max1ä¸”max1é€æ­¥å¢å¤§`ã€‚å›¾2ä»å³å¾€å·¦`S2+=max2ä¸”max2é€æ­¥å¢å¤§`ã€‚S1 + S2ä¼šè¦†ç›–æ•´ä¸ªçŸ©å½¢ï¼Œå¹¶ä¸”ï¼šé‡å¤é¢ç§¯ = æŸ±å­é¢ç§¯ + ç§¯æ°´é¢ç§¯ã€‚æœ€ç»ˆï¼Œ ç§¯æ°´é¢ç§¯ = S1 + S2 - çŸ©å½¢é¢ç§¯ - æŸ±å­é¢ç§¯



### [84. æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)

Difficulty: **å›°éš¾**


ç»™å®š _n_ ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚

æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

![](images/æ ˆ/histogram.png)

<small style="display: inline;">ä»¥ä¸Šæ˜¯æŸ±çŠ¶å›¾çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­çš„å®½åº¦ä¸º 1ï¼Œç»™å®šçš„é«˜åº¦ä¸º `[2,1,5,6,2,3]`ã€‚</small>

![](images/æ ˆ/histogram_area.png)

<small style="display: inline;">å›¾ä¸­é˜´å½±éƒ¨åˆ†ä¸ºæ‰€èƒ½å‹¾å‹’å‡ºçš„æœ€å¤§çŸ©å½¢é¢ç§¯ï¼Œå…¶é¢ç§¯ä¸º `10` ä¸ªå•ä½ã€‚</small>

**ç¤ºä¾‹:**

```
è¾“å…¥: [2,1,5,6,2,3]
è¾“å‡º: 10
```

**æ€è·¯ï¼šå•è°ƒé€’å¢æ ˆã€‚**

æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯éå†æ¯ä¸ªæŸ±å­ï¼Œä»¥å½“å‰æŸ±å­çš„é«˜åº¦ä½œä¸ºçŸ©å½¢çš„é«˜ hï¼Œå‘å·¦å³æ‹“å±•ç›´è‡³é‡åˆ°æ¯”å®ƒå°çš„ï¼Œå°±çŸ©å½¢çš„å®½åº¦wã€‚æ—¶é—´å¤æ‚åº¦æ˜¯O(N^2)ã€‚

ä¸Šè¿°å†™æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å†åµŒå¥—ä¸€å±‚ while å¾ªç¯æ¥å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”æŸ±å­ i é«˜åº¦å°çš„æŸ±å­ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ O(N)çš„ï¼› é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ **O(1) çš„è·å–æŸ±å­ i å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„æŸ±å­å—ï¼Ÿ**ç­”æ¡ˆå°±æ˜¯å•è°ƒå¢æ ˆï¼Œå¯¹äºæ ˆä¸­å…ƒç´ ï¼Œæ ˆä¸­ä¸‹ä¸€ä¸ªå…ƒç´ å°±æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„ï¼Œç„¶ååœ¨éå†è¿‡ç¨‹ä¸­çœ‹æ˜¯ä¸æ˜¯æœ‰æ¯”å®ƒå°çš„å°±è¡Œäº†ï¼Œ**æ•´ä¸ªé—®é¢˜åªéœ€è¦ä¸€ééå†O(N)ã€‚**

å› æ­¤åšæ³•å°±å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬éå†æ¯ä¸ªæŸ±å­ï¼Œè‹¥å½“å‰çš„æŸ±å­é«˜åº¦å¤§äºç­‰äºæ ˆé¡¶æŸ±å­çš„é«˜åº¦ï¼Œå°±ç›´æ¥å°†å½“å‰æŸ±å­å…¥æ ˆï¼Œå¦åˆ™è‹¥å½“å‰çš„æŸ±å­é«˜åº¦å°äºæ ˆé¡¶æŸ±å­çš„é«˜åº¦ï¼Œ**è¯´æ˜å½“å‰æ ˆé¡¶æŸ±å­æ‰¾åˆ°äº†å³è¾¹çš„ç¬¬ä¸€ä¸ªå°äºè‡ªèº«çš„æŸ±å­**ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†æ ˆé¡¶æŸ±å­å‡ºæ ˆæ¥è®¡ç®—ä»¥å…¶ä¸ºé«˜çš„çŸ©å½¢çš„é¢ç§¯äº†ã€‚**æ­¤æ—¶æ ˆé¡¶æ˜¯å¼¹å‡ºçš„æŸ±å­å·¦è¾¹ç¬¬ä¸€ä¸ªå°äºè‡ªèº«çš„æŸ±å­**ï¼Œå› æ­¤è·å¾—äº†å®½wã€‚      

**æˆ–è€…å¯ä»¥è¯´ï¼Œå•è°ƒé€’å¢æ ˆç”¨äºå¿«é€Ÿè·å–å·¦è¾¹å’Œå³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„ã€‚**

```java
public int largestRectangleArea(int[] heights) {
    Stack<Integer> stack = new Stack<>();
    stack.push(-1);
    int res = 0;
    for (int i = 0; i < heights.length; ++i) {
        while (stack.peek() != -1 && heights[stack.peek()] >= heights[i]) {
            res = Math.max(res, heights[stack.pop()] * (i - stack.peek() - 1));
        }
        stack.push(i);
    }
    while (stack.peek() != -1) {
        res = Math.max(res, heights[stack.pop()]
                       * (heights.length - stack.peek() - 1));
    }
    return res;
}
```

**æ›´ç®€æ´çš„å†™æ³•ï¼šå‰åå¢åŠ ä¸¤ä¸ªé«˜åº¦ä¸º0çš„æŸ±å­ï¼Œèµ·åˆ°äº†â€œå“¨å…µâ€ğŸ’‚çš„ä½œç”¨ã€‚**

```java
public int largestRectangleArea(int[] heights) {
    // è¿™é‡Œä¸ºäº†ä»£ç ç®€ä¾¿ï¼Œåœ¨æŸ±ä½“æ•°ç»„çš„å¤´å’Œå°¾åŠ äº†ä¸¤ä¸ªé«˜åº¦ä¸º 0 çš„æŸ±ä½“ã€‚
    int[] tmp = new int[heights.length + 2];
    System.arraycopy(heights, 0, tmp, 1, heights.length);

    Stack<Integer> stack = new Stack<>();
    int area = 0;
    for (int i = 0; i < tmp.length; i++) {
        // å¯¹æ ˆä¸­æŸ±ä½“æ¥è¯´ï¼Œæ ˆä¸­çš„ä¸‹ä¸€ä¸ªæŸ±ä½“å°±æ˜¯å…¶ã€Œå·¦è¾¹ç¬¬ä¸€ä¸ªå°äºè‡ªèº«çš„æŸ±ä½“ã€ï¼›
        // è‹¥å½“å‰æŸ±ä½“ i çš„é«˜åº¦å°äºæ ˆé¡¶æŸ±ä½“çš„é«˜åº¦ï¼Œè¯´æ˜ i æ˜¯æ ˆé¡¶æŸ±ä½“çš„ã€Œå³è¾¹ç¬¬ä¸€ä¸ªå°äºæ ˆé¡¶æŸ±ä½“çš„æŸ±ä½“ã€ã€‚
        // å› æ­¤ä»¥æ ˆé¡¶æŸ±ä½“ä¸ºé«˜çš„çŸ©å½¢çš„å·¦å³å®½åº¦è¾¹ç•Œå°±ç¡®å®šäº†ï¼Œå¯ä»¥è®¡ç®—é¢ç§¯
        while (!stack.isEmpty() && tmp[i] < tmp[stack.peek()]) {
            int h = tmp[stack.pop()];
            area = Math.max(area, (i - stack.peek() - 1) * h);
        }
        stack.push(i);
    }
    return area;
}
```



### [402. ç§»æ‰Kä½æ•°å­—](https://leetcode-cn.com/problems/remove-k-digits/)

Difficulty: **ä¸­ç­‰**


ç»™å®šä¸€ä¸ªä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„éè´Ÿæ•´æ•° _num_ï¼Œç§»é™¤è¿™ä¸ªæ•°ä¸­çš„ _k_ ä½æ•°å­—ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ã€‚

**æ³¨æ„:**

*   _num_ çš„é•¿åº¦å°äº 10002 ä¸” â‰¥ _kã€‚_
*   _num_ ä¸ä¼šåŒ…å«ä»»ä½•å‰å¯¼é›¶ã€‚

**ç¤ºä¾‹ 1 :**

```
è¾“å…¥: num = "1432219", k = 3
è¾“å‡º: "1219"
è§£é‡Š: ç§»é™¤æ‰ä¸‰ä¸ªæ•°å­— 4, 3, å’Œ 2 å½¢æˆä¸€ä¸ªæ–°çš„æœ€å°çš„æ•°å­— 1219ã€‚
```

**ç¤ºä¾‹ 2 :**

```
è¾“å…¥: num = "10200", k = 1
è¾“å‡º: "200"
è§£é‡Š: ç§»æ‰é¦–ä½çš„ 1 å‰©ä¸‹çš„æ•°å­—ä¸º 200\. æ³¨æ„è¾“å‡ºä¸èƒ½æœ‰ä»»ä½•å‰å¯¼é›¶ã€‚
```

ç¤ºä¾‹ **3 :**

```
è¾“å…¥: num = "10", k = 2
è¾“å‡º: "0"
è§£é‡Š: ä»åŸæ•°å­—ç§»é™¤æ‰€æœ‰çš„æ•°å­—ï¼Œå‰©ä½™ä¸ºç©ºå°±æ˜¯0ã€‚
```

**æ€è·¯ï¼šè¦åˆ æ‰å‰é¢çš„å¤§çš„æ•°ï¼Œç•™ä¸‹åé¢æ›´å°çš„æ•°ã€‚å¿«é€Ÿæ‰¾åˆ°å³è¾¹æ›´å°çš„ï¼Œç”¨å•è°ƒé€’å¢æ ˆã€‚**

å³ï¼šç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å¢æ ˆï¼Œå¦‚æœå½“å‰å…ƒç´ æ¯”æ ˆé¡¶å°ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ç»§ç»­åˆ é™¤(k > 0)ï¼Œå°±åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚

æ³¨æ„ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚éå†ç»“æŸåè¿˜æ²¡æœ‰åˆ å¤Ÿï¼Œè¿˜éœ€è¦ç»§ç»­åˆ é™¤ã€‚å†æ¯”å¦‚æ•°å‰é¢æ˜¯0ï¼Œéœ€è¦å¤„ç†ä¸€ä¸‹ã€‚è¿™é“é¢˜æ˜¯æŠŠ002æ”¹å†™æˆ2å°±è¡Œäº†ã€‚

```java
public String removeKdigits(String num, int k) {
    int len = num.length();
    //corner case
    if (k == len) {
        return "0";
    }

    Stack<Character> stack = new Stack<>();
    int i = 0;
    while (i < num.length()) {
        //whenever meet a digit which is less than the previous digit, discard the previous one
        while (k > 0 && !stack.isEmpty() && stack.peek() > num.charAt(i)) {
            stack.pop();
            k--;
        }
        stack.push(num.charAt(i));
        i++;
    }

    // è¿˜æ²¡åˆ å®Œï¼Œcorner case like "1111"
    while (k > 0) {
        stack.pop();
        k--;
    }

    //construct the number from the stack
    StringBuilder sb = new StringBuilder();
    while (!stack.isEmpty()) {
        sb.append(stack.pop());
    }
    sb.reverse();

    //remove all the 0 at the head
    while (sb.length() > 1 && sb.charAt(0) == '0') {
        sb.deleteCharAt(0);
    }
    return sb.toString();
}
```



### [321. æ‹¼æ¥æœ€å¤§æ•°](https://leetcode-cn.com/problems/create-maximum-number/)

Difficulty: **å›°éš¾**


ç»™å®šé•¿åº¦åˆ†åˆ«ä¸º `m` å’Œ `n` çš„ä¸¤ä¸ªæ•°ç»„ï¼Œå…¶å…ƒç´ ç”± `0-9` æ„æˆï¼Œè¡¨ç¤ºä¸¤ä¸ªè‡ªç„¶æ•°å„ä½ä¸Šçš„æ•°å­—ã€‚ç°åœ¨ä»è¿™ä¸¤ä¸ªæ•°ç»„ä¸­é€‰å‡º `k (k <= m + n)` ä¸ªæ•°å­—æ‹¼æ¥æˆä¸€ä¸ªæ–°çš„æ•°ï¼Œè¦æ±‚ä»åŒä¸€ä¸ªæ•°ç»„ä¸­å–å‡ºçš„æ•°å­—ä¿æŒå…¶åœ¨åŸæ•°ç»„ä¸­çš„ç›¸å¯¹é¡ºåºã€‚

æ±‚æ»¡è¶³è¯¥æ¡ä»¶çš„æœ€å¤§æ•°ã€‚ç»“æœè¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥æœ€å¤§æ•°çš„é•¿åº¦ä¸º `k` çš„æ•°ç»„ã€‚

**è¯´æ˜:** è¯·å°½å¯èƒ½åœ°ä¼˜åŒ–ä½ ç®—æ³•çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥:
nums1 = [3, 4, 6, 5]
nums2 = [9, 1, 2, 5, 8, 3]
k = 5
è¾“å‡º:
[9, 8, 6, 5, 3]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥:
nums1 = [6, 7]
nums2 = [6, 0, 4]
k = 5
è¾“å‡º:
[6, 7, 6, 0, 4]
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥:
nums1 = [3, 9]
nums2 = [8, 9]
k = 3
è¾“å‡º:
[9, 8, 9]
```

**æ€è·¯ï¼šè¿™é“é¢˜è€ƒéªŒæŠ½è±¡çš„èƒ½åŠ›ã€‚ä¸¤ä¸ªæ•°ç»„ä¸€å…±é€‰å‡ºkä¸ªå­—æ¯ï¼Œç›´æ¥é€‰æ˜¯å¾ˆéš¾åˆ¤æ–­è¯¥é€‰å“ªä¸€ä¸ªçš„ã€‚ä½†æ˜¯å¦‚æœåªåœ¨ä¸€ä¸ªæ•°ç»„ä¸­å–kä¸ªå‘¢ï¼Ÿå–kä¸ªç›¸å½“äºåˆ é™¤len-kä¸ªï¼Œä¹Ÿå°±æ˜¯[402. ç§»æ‰Kä½æ•°å­—](#402-ç§»æ‰Kä½æ•°å­—)ã€‚**

**å‡è®¾æˆ‘ä»¬ä» nums1 ä¸­å–äº† k1 ä¸ªï¼Œä» num2 ä¸­å–äº† k2 ä¸ªï¼Œå…¶ä¸­ k1 + k2 = kã€‚è€Œ k1 å’Œ k2 è¿™ ä¸¤ä¸ªå­é—®é¢˜æˆ‘ä»¬æ˜¯ä¼šè§£å†³çš„ã€‚ç”±äºè¿™ä¸¤ä¸ªå­é—®é¢˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åˆ†åˆ«æ±‚è§£ï¼Œç„¶åå°†ç»“æœåˆå¹¶å³å¯ã€‚**

```java
public int[] maxNumber(int[] nums1, int[] nums2, int k) {
    if (k == 0) return new int[0];
    String max = "0";
    //æšä¸¾æ‰€æœ‰çš„æƒ…å†µ
    for (int i = Math.max(0, k - nums2.length); i <= nums1.length && i <= k; i++) {
        String mergeString = merge(removeKNum(nums1, i), removeKNum(nums2, k - i));
        max = max.compareTo(mergeString) > 0 ? max : mergeString;
    }

    int[] res = new int[k];
    for (int i = 0; i < res.length; i++) {
        res[i] = max.charAt(i) - '0';
    }
    return res;
}

//å•è°ƒé€’å‡æ ˆ
private String removeKNum(int[] nums, int k) {
    int[] res = new int[k];
    k = nums.length - k;  //kä»ç•™å‡ ä¸ªå˜ä¸ºåˆ é™¤å‡ ä¸ª
    Stack<Integer> stack = new Stack<>();
    for (int i = 0; i < nums.length; i++) {
        while (k > 0 && !stack.isEmpty() && nums[stack.peek()] < nums[i]) {
            stack.pop();
            k--;
        }
        stack.push(i);
    }
    while (k > 0) {
        stack.pop();
        k--;
    }
    StringBuilder sb = new StringBuilder();
    for (int n : stack) {
        sb.append(nums[n]);
    }
    // System.out.println("MAX_NUMBER: "+ sb);
    return sb.toString();
}

private String merge(String s1, String s2) {
    StringBuilder sb = new StringBuilder();
    int i = 0, j = 0;
    while (i < s1.length() && j < s2.length()) {
        //mergeçš„ä¸æ˜¯ç›´æ¥å–iå’Œjå¤„å¤§çš„ï¼Œå¦‚æœç›¸ç­‰ï¼Œåº”è¯¥å–æ•°æ›´å¤§çš„é‚£ä¸ª ä¾‹å¦‚{6,7,4} å’Œ {6, 1, 1} åº”è¯¥å–ç¬¬ä¸€ä¸ªæ•°ç»„çš„6
        sb.append(s1.substring(i).compareTo(s2.substring(j)) > 0 ? s1.charAt(i++) : s2.charAt(j++));
    }
    if (i == s1.length()) {
        sb.append(s2.substring(j));
    } else {
        sb.append(s1.substring(i));
    }
    return sb.toString();
}
```



### [316. å»é™¤é‡å¤å­—æ¯](https://leetcode-cn.com/problems/remove-duplicate-letters/)

Difficulty: **ä¸­ç­‰**


ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ å»é™¤å­—ç¬¦ä¸²ä¸­é‡å¤çš„å­—æ¯ï¼Œä½¿å¾—æ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ã€‚éœ€ä¿è¯ **è¿”å›ç»“æœçš„å­—å…¸åºæœ€å°**ï¼ˆè¦æ±‚ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚

**ç›¸åŒé¢˜ï¼š[1081. ä¸åŒå­—ç¬¦çš„æœ€å°å­åºåˆ—](https://leetcode-cn.com/problems/smallest-subsequence-of-distinct-characters/)**

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "bcabc"
è¾“å‡ºï¼š"abc"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "cbacdcbc"
è¾“å‡ºï¼š"acdb"
```

**æç¤ºï¼š**

*   1 <= s.length <= 10<sup>4</sup>
*   `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

**æ€è·¯ï¼šå¦‚æœåé¢æœ‰ä¸€ä¸ªç‰¹åˆ«å°çš„ï¼Œå‰é¢çš„éƒ½éœ€è¦åˆ é™¤ï¼Œå› æ­¤éœ€è¦å¿«é€Ÿè·å–æ¯”å®ƒå°çš„ï¼Œé¦–å…ˆæ˜ç¡®å®ƒæ˜¯ä¸€ä¸ªå•è°ƒé€’å¢æ ˆçš„é—®é¢˜ã€‚**

**ä½†è¦ä¿è¯æ¯ä¸ªå­—ç¬¦éƒ½å‡ºç°ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯åªæœ‰åé¢è¿˜æœ‰è¿™ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œæ‰å¯ä»¥åˆ é™¤ï¼Œå¦åˆ™å°±ä¸èƒ½åˆ é™¤ï¼Œå› æ­¤è¦ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦çš„é¢‘ç‡ã€‚**

```java
public String removeDuplicateLetters(String s) {
    Stack<Character> stack = new Stack<>();

    // ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨è®°å½•å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ•°é‡
    // å› ä¸ºè¾“å…¥ä¸º ASCII å­—ç¬¦ï¼Œå¤§å° 256 å¤Ÿç”¨äº†
    int[] count = new int[256];
    for (int i = 0; i < s.length(); i++) {
        count[s.charAt(i)]++;
    }

    boolean[] inStack = new boolean[256];
    for (char c : s.toCharArray()) {
        // æ¯éå†è¿‡ä¸€ä¸ªå­—ç¬¦ï¼Œéƒ½å°†å¯¹åº”çš„è®¡æ•°å‡ä¸€
        count[c]--;

        if (inStack[c]) continue;

        while (!stack.isEmpty() && stack.peek() > c) {
            // è‹¥ä¹‹åä¸å­˜åœ¨æ ˆé¡¶å…ƒç´ äº†ï¼Œåˆ™åœæ­¢ pop
            if (count[stack.peek()] == 0) {
                break;
            }
            // è‹¥ä¹‹åè¿˜æœ‰ï¼Œåˆ™å¯ä»¥ pop
            inStack[stack.pop()] = false;
        }
        stack.push(c);
        inStack[c] = true;
    }

    StringBuilder sb = new StringBuilder();
    while (!stack.empty()) {
        sb.append(stack.pop());
    }
    return sb.reverse().toString();
}
```



## æ ‘çš„éå†

### [654. æœ€å¤§äºŒå‰æ ‘](https://leetcode-cn.com/problems/maximum-binary-tree/)

Difficulty: **ä¸­ç­‰**


ç»™å®šä¸€ä¸ªä¸å«é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ `nums` ã€‚ä¸€ä¸ªä»¥æ­¤æ•°ç»„ç›´æ¥é€’å½’æ„å»ºçš„ **æœ€å¤§äºŒå‰æ ‘** å®šä¹‰å¦‚ä¸‹ï¼š

1.  äºŒå‰æ ‘çš„æ ¹æ˜¯æ•°ç»„ `nums` ä¸­çš„æœ€å¤§å…ƒç´ ã€‚
2.  å·¦å­æ ‘æ˜¯é€šè¿‡æ•°ç»„ä¸­ **æœ€å¤§å€¼å·¦è¾¹éƒ¨åˆ†** é€’å½’æ„é€ å‡ºçš„æœ€å¤§äºŒå‰æ ‘ã€‚
3.  å³å­æ ‘æ˜¯é€šè¿‡æ•°ç»„ä¸­ **æœ€å¤§å€¼å³è¾¹éƒ¨åˆ†** é€’å½’æ„é€ å‡ºçš„æœ€å¤§äºŒå‰æ ‘ã€‚

è¿”å›æœ‰ç»™å®šæ•°ç»„ `nums` æ„å»ºçš„ **æœ€å¤§äºŒå‰æ ‘** ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/24/tree1.jpg)

```
è¾“å…¥ï¼šnums = [3,2,1,6,0,5]
è¾“å‡ºï¼š[6,3,5,null,2,0,null,null,1]
è§£é‡Šï¼šé€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š
- [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚
    - [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚
        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
        - [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚
            - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
            - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚
    - [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚
        - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚
        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![](https://assets.leetcode.com/uploads/2020/12/24/tree2.jpg)

```
è¾“å…¥ï¼šnums = [3,2,1]
è¾“å‡ºï¼š[3,null,2,null,1]
```

**æç¤ºï¼š**

*   `1 <= nums.length <= 1000`
*   `0 <= nums[i] <= 1000`
*   `nums` ä¸­çš„æ‰€æœ‰æ•´æ•° **äº’ä¸ç›¸åŒ**

```java
public TreeNode constructMaximumBinaryTree(int[] nums) {
    TreeNode root = null, node = null;
    LinkedList<TreeNode> stack = new LinkedList<>();

    for (int i = 0; i < nums.length; ++i) {
        node = new TreeNode(nums[i]);
        while (!stack.isEmpty() && stack.peek().val < node.val) {
            // å‡ºæ ˆ - æ ˆé¡¶æ˜¯å·¦è¾¹ç¬¬ä¸€ä¸ªå¤§çš„å€¼, nodeæ˜¯å³è¾¹ç¬¬ä¸€ä¸ªå¤§çš„å€¼
            root = stack.pop();

            // æ¡ä»¶2ã€3
            if (stack.isEmpty() || stack.peek().val > node.val) {
                node.left = root;
            } else {
                stack.peek().right = root;
            }
        }

        // å…¥æ ˆ
        stack.push(node);
    }

    // åªæœ‰ä¸€ä¸ª: å·¦è¾¹ç¬¬ä¸€ä¸ªå¤§çš„
    while (!stack.isEmpty()) {
        root = stack.pop();
        if (!stack.isEmpty()) {
            // æ¡ä»¶3
            stack.peek().right = root;
        }
    }

    // æœ€åå‡ºæ ˆçš„å°±æ˜¯root
    return root;
}
```

